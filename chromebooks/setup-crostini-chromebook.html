<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.3/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">
        
        

        <title>Setting up Linux on a Chromebook with Crostini</title>
    </head>

    <body>
 
        <header>
            <a href="/">khalido.org</a> <br>
            I love me some subheader text.
        </header>

<article>
        <h1>Setting up Linux on a Chromebook with Crostini</h1>
    
    <details>
        <summary>Table of contents.</summary>
        <div class="toc">
<ul>
<li><a href="#install-all-the-apps">Install all the apps</a><ul>
<li><a href="#use-backports-to-get-recent-packages">use backports to get recent packages</a></li>
<li><a href="#flatpak">flatpak</a></li>
<li><a href="#vs-code">vs code</a></li>
<li><a href="#markdown-app">markdown app</a></li>
</ul>
</li>
<li><a href="#install-anaconda-for-a-better-python">install anaconda for a better python</a><ul>
<li><a href="#jupyter-lab">jupyter lab</a></li>
<li><a href="#install-a-r-kernel">install a R kernel</a></li>
</ul>
</li>
<li><a href="#make-the-terminal-nicer-to-use">make the terminal nicer to use</a><ul>
<li><a href="#fix-window-shortcuts">fix window shortcuts</a></li>
<li><a href="#multiplex-all-the-things">multiplex all the things</a></li>
<li><a href="#jazz-up-the-shell">jazz up the shell</a></li>
<li><a href="#setup-vim-proper-like">setup vim proper like</a></li>
</ul>
</li>
<li><a href="#download-all-my-git-repos">Download all my git repos</a></li>
</ul>
</div>

    </details>
  
    <p>ChromeOS supports a built in Linux - running inside a container running insde a VM. Turn it on by going to settings and pressing the on button for Linux (beta). This gives us a bare bones Linux install running Debian Stretch. So here goes all the things I did to customize it.</p>
<p>Most of these tips are from the <a href="https://www.reddit.com/r/Crostini/wiki/index">reddit crostini wiki</a>, I've put all the ones I'm using in one page for a handy reference.</p>
<h2 id="install-all-the-apps">Install all the apps</h2>
<h3 id="use-backports-to-get-recent-packages">use backports to get recent packages</h3>
<p>the default crostini container/vm whatever is running debian stretch, which is nice and stable, but has a lot of old packages in its repo.</p>
<p>To install apps, use the backports repo, which contains newer packages from debian testing and unstable. This is already configured in ChromeOS (at least in 76). Hopefully newer versions of ChromeOS switch to the 2019 release of Debian.</p>
<p>by default apt will pull old packages from stretch, so to install something from backports:</p>
<p><code>sudo apt -t stretch-backports install package_name</code></p>
<h3 id="flatpak">flatpak</h3>
<p>Even stretch-backports is full of not new enough apps. So for really new versions use flatpak.</p>
<p>Install flatpak: <code>sudo apt install -t stretch-backports flatpak</code></p>
<p>Add the flatpak repo:</p>
<p><code>sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo</code></p>
<p>Install apps by going to the app page on flathub and copying the install line at the bottom - for example to install <a href="https://flathub.org/apps/details/de.wolfvollprecht.UberWriter">Uberwriter</a> its:</p>
<p><code>sudo flatpak install flathub de.wolfvollprecht.UberWriter</code></p>
<p>Note: you need sudo to install and update flatpak apps in crostini.</p>
<h3 id="vs-code">vs code</h3>
<p>Anaconda can automatically install VS Code, but to <a href="https://www.reddit.com/r/Crostini/wiki/howto/install-vscode">install it directly</a>:</p>
<pre><code class="language-bash">curl -L https://go.microsoft.com/fwlink/?LinkID=760868 &gt; vscode.deb
sudo apt install ./vscode.deb
</code></pre>
<p>Useful plugins:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one">Markdown All in One</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python</a></li>
</ul>
<h3 id="markdown-app">markdown app</h3>
<p>Currently I'm using <a href="http://thomaswilburn.net/caret/">Caret</a> - a chromeos text editor app which runs lightening fast.</p>
<p>vs code can handle markdown nicely, but I find it too slow on Crostini. I prefer <a href="https://typora.io/">Typora.io</a> or <a href="http://caret.io/">Caret.io</a> for markdown and vs code is for coding. BUT all these apps are based on electron, and currently run slow on Crostini, and will continue being slow until Crostini gets GPU accleration.</p>
<p>Install Caret by downloading the <a href="https://github.com/careteditor/releases-beta/releases">latest beta release .deb</a> and:</p>
<p><code>sudo apt install ./caret-beta.deb</code></p>
<p>Install Typora - haven't tested this out, especially adding repo. Apparently you have to <code>sudo apt install software-properties-common</code> first before adding a repo.</p>
<pre><code class="language-bash"># add Typora's repository
sudo add-apt-repository 'deb https://typora.io/linux ./'
sudo apt update

# install typora
sudo apt install typora
</code></pre>
<h2 id="install-anaconda-for-a-better-python">install anaconda for a better python</h2>
<p>Note: install <a href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a> instead to save space if needed.</p>
<p>go to the <a href="https://www.anaconda.com/download/#linux">Anaconda linux download page</a> and copy the url, then download it:</p>
<p><code>curl -O https://repo.anaconda.com/archive/Anaconda3-2019.07-Linux-x86_64.sh</code> # (update url)</p>
<p>Install by <code>bash Anaconda3-2019.07-Linux-x86_64.sh</code> - change filename to whatever the downloaded file name is.</p>
<h3 id="jupyter-lab">jupyter lab</h3>
<p>Works out of the box with Anaconda. If using miniconda, install by</p>
<p><code>conda install -c conda-forge jupyterlab</code></p>
<p>Other useful stuff for Jupyter:</p>
<p>To install <a href="https://github.com/mauhai/awesome-jupyterlab">extensions</a>, first install nodejs:</p>
<p>Step 1: install <a href="https://github.com/nvm-sh/nvm#install--update-script">nvm</a>, a script to install nodejs</p>
<p><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</code></p>
<p>step 2: install nodejs itself by:</p>
<p><code>nvm install node</code></p>
<p>Some seful jupyterlab extensions:</p>
<p>See https://github.com/mauhai/awesome-jupyterlab</p>
<ul>
<li>show a <a href="https://github.com/jupyterlab/jupyterlab-toc">toc</a> from markdown headings: <code>jupyter labextension install @jupyterlab/toc</code></li>
</ul>
<p>todo: try out <a href="https://nteract.io/">nteract</a> - a react based desktop front end for jupyter.</p>
<h3 id="install-a-r-kernel">install a R kernel</h3>
<p>I hate doing this, but sometimes you need R. So here goes:</p>
<pre><code>conda create -n R r-essentials r-base
</code></pre>
<p>Presto! now R should show up as a kernel in jupyter.</p>
<p>Intall r packages inside the r environment by using the conda r channel - note that many packages seems to be prefaced with <code>r-</code>:</p>
<pre><code>conda install -c r r-plotly
</code></pre>
<h2 id="make-the-terminal-nicer-to-use">make the terminal nicer to use</h2>
<p>this is really important, cause if the terminal doesn't look like something out of a movie, are you really doing something?</p>
<p>I'm using <a href="https://gnunn1.github.io/tilix-web/">Tilix</a>, install by</p>
<p><code>sudo apt -t stretch-backports install tilix</code></p>
<h3 id="fix-window-shortcuts">fix window shortcuts</h3>
<p>First up, the native terminal gobbles up some of my fav chromeos shortcuts, namely:</p>
<ul>
<li>Maximize <code>Alt + =</code></li>
<li>Minimize <code>Alt + -</code></li>
<li>Dock window left/right <code>Alt + [</code>, <code>Alt + ]</code></li>
<li>Close window <code>Ctrl+Shift+W</code> - this is actually <code>Ctrl-W</code> normally, but terminal might need that hence shift.</li>
</ul>
<p>fix this by pressing <code>ctrl-shift-p</code> inside terminal, then scroll down to keyboard preferences and enter</p>
<pre><code class="language-bash">{
  &quot;Alt-187&quot;: &quot;PASS&quot;,
  &quot;Alt-189&quot;: &quot;PASS&quot;,
  &quot;Alt-219&quot;: &quot;PASS&quot;,
  &quot;Alt-221&quot;: &quot;PASS&quot;,
  &quot;Ctrl-Shift-W&quot;: &quot;PASS&quot;
}
</code></pre>
<p>This has to be done only once, since ChromeOS remembers the terminal settings across devices. So handy after a powerwash.</p>
<h3 id="multiplex-all-the-things">multiplex all the things</h3>
<p>If using Tilix, no need to do this, but for the native terminal,  install tmux:</p>
<p><code>sudo apt -t stretch-backports install tmux</code></p>
<p>the only thing I really do with tmux is to split the terminal horizontally, then splitting one horizontal terminal vertically, for a total of three windows. Now there is a lot more about sessions and whats not, but the bare basics are:</p>
<p>start tmux by typing <code>tmux</code>, then press <code>ctrl+b</code> to enter command mode. <code>"</code> splits the window horizontally and <code>%</code> splits it vertically. To move around, press <code>ctrl-b arrow-key</code></p>
<p>For more customizatoin, make a <code>.tmux.conf</code> in the home directory and add:</p>
<pre><code class="language-bash"># Enable mouse mode (tmux 2.1 and above)
set -g mouse on
</code></pre>
<h3 id="jazz-up-the-shell">jazz up the shell</h3>
<p>rumour has it that crostini can have a heart attack if you change the shell, so stick with bash. Consider <a href="https://github.com/ohmybash/oh-my-bash">oh-my-bash</a> or <a href="https://github.com/ohmybash/oh-my-bash">bash-it</a> for hacker level coding.</p>
<p>also install <a href="https://github.com/powerline/fonts">powerline-fonts</a> and select a powerline font for the terminal.</p>
<p><code>sudo apt -t stretch-backports install fonts-powerline</code></p>
<p>Useful shell tools:</p>
<p><a href="https://tldr.sh">tldr</a> shows a short and useful help page for commands, e.g type <code>tldr curl</code> to get a synopsis of how to use curl.</p>
<ul>
<li>Preferred install: <code>npm install -g tldr</code></li>
<li>If node not installed: <code>pip install tldr</code></li>
</ul>
<p><a href="https://github.com/sharkdp/bat">bat</a> a replacement for cat, displays files with syntax highlighting in the terminal. Right now as rendering problems in crostini, but hopefully will improve. Install by downloading the .deb and <code>sudo apt install ./bat_file.deb</code>.</p>
<h3 id="setup-vim-proper-like">setup vim proper like</h3>
<p>install plugin manager for vim - I went with <a href="https://github.com/junegunn/vim-plug">vim-plug</a>:</p>
<p>edit <code>~/.vimrc</code> so it has this stuff:</p>
<pre><code class="language-bash">&quot; install vim-plug if not installed
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

&quot; plugin directory, don't use standard Vim names like 'plugin'
call plug#begin('~/.vim/plugged')

&quot; plugins go here
&quot; ---------------
&quot; highlights code problems: https://github.com/w0rp/ale
Plug 'w0rp/ale'
&quot; adds a status bar: https://github.com/itchyny/lightline.vim
Plug 'itchyny/lightline.vim'
&quot; distraction free writing: https://github.com/junegunn/goyo.vim
Plug 'junegunn/goyo.vim'
&quot; for python auto completion: https://github.com/davidhalter/jedi-vim
Plug 'davidhalter/jedi-vim'

&quot; Initialize plugin system
call plug#end()

&quot; don't break mid word
set linebreak

</code></pre>
<p>run <code>:PlugInstall</code> in vim to install plugs (if needed).</p>
<h2 id="download-all-my-git-repos">Download all my git repos</h2>
<p>This command will grab json output of the first (or last?) 200 repos in my github and git clone them all one by one into the directory this command was run.</p>
<pre><code class="language-bash">curl -s https://api.github.com/users/khalido/repos?per_page=200 | grep \&quot;clone_url\&quot; | awk '{print $2}' | sed -e 's/&quot;//g' -e 's/,//g' | xargs -n1 git clone
</code></pre>
</article>

<div class="meta">
    posted <time>2018-08-24</time>, updated <time>2019-08-7</time><br>
    tagged: 
    <a href="/chromebooks">chromebooks</a>

    <ul>    
        <li><a href="https://github.com/khalido/blog/edit/master/notes/setup-crostini-chromebook.md">Edit</a></li>
    </ul>

</div>

<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>