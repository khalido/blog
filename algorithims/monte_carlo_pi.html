<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.3/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">
        
        

        <title>Finding Pi using Monte Carlo</title>
    </head>

    <body>
 
        <header>
            <a href="/">khalido.org</a> <br>
            I love me some subheader text.
        </header>

<article>
        <h1>Finding Pi using Monte Carlo</h1>
    
    <details>
        <summary>Table of contents.</summary>
        <div class="toc">
<ul>
<li><a href="#simple-way">simple way</a></li>
<li><a href="#now-to-jazz-this-up-visually">now to jazz this up visually</a></li>
</ul>
</div>

    </details>
  
    <p>pi can be approximated by throwing darts at a circle in a square, and calculating the ratio of darts landing on the circle vs the square.</p>
<h2 id="simple-way">simple way</h2>
<p>First, we generate a bunch of throws by using random.random()</p>
<p>We are throwing darts in only the top right quadrant of the square, so the origin is the center of the square, and the diameter of the circle is 2.</p>
<p>We figure out if the points are in the circle by using the pythogeras theorem to calculate the distance of each point from the origin <code>(0,0)</code>. If the distance is greater than the radius of the circle, it's outside.</p>
<div class="codecell">
<div class="input_area">
<pre><code class="language-python">darths_thrown = 10000
throws = [[random.random(), random.random()] for i in range(darths_thrown)]

in_circle=0
out_circle=0

for throw in throws:
    if math.sqrt(throw[0]**2 + throw[1]**2) &lt;= 1:
        in_circle +=1
    else:
        out_circle += 1

pi_estimate = in_circle/len(throws) * 4

print(f'estimate: {pi_estimate}')
print(f'actual: {math.pi}')
print(f'difference is {abs(pi_estimate-math.pi)}')
</code></pre>
</div>
<div class="output_area">
<pre><code>estimate: 3.1232
actual: 3.141592653589793
difference is 0.018392653589792918
</code></pre>
</div>
</div>
<h2 id="now-to-jazz-this-up-visually">now to jazz this up visually</h2>
<p>Putting our random darts in a dataframe to make it easier to eyeball:</p>
<div class="codecell">
<div class="input_area">
<pre><code class="language-python">df = pd.DataFrame(np.random.rand(darths_thrown,2)*2, columns=[&quot;x&quot;, &quot;y&quot;])
df.head(2)
</code></pre>
</div>
<div class="output_area">
<div>
<style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>x</th>
<th>y</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1.849016</td>
<td>0.329357</td>
</tr>
<tr>
<th>1</th>
<td>0.522901</td>
<td>1.703207</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now to label each darth thrown if its inside or outside the circle:</p>
<div class="codecell">
<div class="input_area">
<pre><code class="language-python">def is_in_circle(row):
    x = row['x']
    y = row['y']
    if math.sqrt((x-1)**2 + (y-1)**2) &lt;= 1:
        return True
    else:
        return False

df['In_Circle'] = df.apply(is_in_circle, axis=1)
df.head(4)
</code></pre>
</div>
<div class="output_area">
<div>
<style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>x</th>
<th>y</th>
<th>In_Circle</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1.849016</td>
<td>0.329357</td>
<td>False</td>
</tr>
<tr>
<th>1</th>
<td>0.522901</td>
<td>1.703207</td>
<td>True</td>
</tr>
<tr>
<th>2</th>
<td>1.694082</td>
<td>1.474200</td>
<td>True</td>
</tr>
<tr>
<th>3</th>
<td>1.820643</td>
<td>1.966332</td>
<td>False</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now to eyeball the random darts, coloured by whether they are in or outside the circle:</p>
<div class="codecell">
<div class="input_area">
<pre><code class="language-python">fig, ax = plt.subplots(figsize=(9,9))
ax.set_title(&quot;Random darts!&quot;)
ax.scatter(df['x'], df['y'], c=[within and 'blue' or 'red' for within in df['In_Circle']], alpha=0.4,s= 25);
</code></pre>
</div>
<div class="output_area">
<p><img alt="svg" src="monte_carlo_pi_files/output_8_0.svg" /></p>
</div>
</div>
<p>the ratio of the area of the circle divided by the area of the square gives us pi/4:</p>
<div class="codecell">
<div class="input_area">
<pre><code class="language-python">pi_estimate = df['In_Circle'].sum() / len(df) * 4
pi_estimate
</code></pre>
</div>
<div class="output_area">
<pre><code>3.148
</code></pre>
</div>
</div>
<div class="codecell">
<div class="input_area">
<pre><code class="language-python">pi_estimate - math.pi
</code></pre>
</div>
<div class="output_area">
<pre><code>0.0064073464102070155
</code></pre>
</div>
</div>
<p>So the estimate is pretty close! Neat, since all it took was some very simple maths and a random number generator.</p>
</article>

<div class="meta">
    posted <time>2018-08-10</time>, updated <time>2020-11-12</time><br>
    tagged: 
    <a href="/algorithims">algorithims</a>

    <ul>    
        <li><a href="https://github.com/khalido/blog/blob/master/notebooks/monte_carlo_pi.ipynb">View on Github</a></li>
        
        <li><a href="https://colab.research.google.com/github/khalido/blog/blob/master/notebooks/monte_carlo_pi.ipynb">
            <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
        </a></li>
    
    </ul>

</div>

<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>