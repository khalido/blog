<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">
        
        

        <title>Finding Pi using Monte Carlo</title>
    </head>

    <body>
 
        <header>
            <a href="/">khalido.org</a> <br>
            I love me some subheader text.
        </header>

    <details>
        <summary>Table of contents.</summary>
        <div class="toc">
<ul>
<li><a href="#simple-way">simple way</a></li>
<li><a href="#now-to-jazz-this-up-visually">now to jazz this up visually</a></li>
</ul>
</div>

    </details>

<article>
        <h1>Finding Pi using Monte Carlo</h1>
  
    <p>pi can be approximated by throwing darts at a circle in a square, and calculating the ratio of darts landing on the circle vs the square.</p>
<h2 id="simple-way">simple way</h2>
<p>First, we generate a bunch of throws by using random.random()</p>
<p>We are throwing darts in only the top right quadrant of the square, so the origin is the center of the square, and the diameter of the circle is 2.</p>
<p>We figure out if the points are in the circle by using the pythogeras theorem to calculate the distance of each point from the origin <code>(0,0)</code>. If the distance is greater than the radius of the circle, it's outside.
<div class="codecell" markdown="1">
<div class="input_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="n">darths_thrown</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">throws</span> <span class="o">=</span> <span class="p">[[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">darths_thrown</span><span class="p">)]</span>

<span class="n">in_circle</span><span class="o">=</span><span class="mi">0</span>
<span class="n">out_circle</span><span class="o">=</span><span class="mi">0</span>

<span class="k">for</span> <span class="n">throw</span> <span class="ow">in</span> <span class="n">throws</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">throw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">throw</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">in_circle</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_circle</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">pi_estimate</span> <span class="o">=</span> <span class="n">in_circle</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">throws</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;estimate: </span><span class="si">{</span><span class="n">pi_estimate</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;actual: </span><span class="si">{</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;difference is </span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="n">pi_estimate</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<p></div>
<div class="output_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="n">estimate</span><span class="o">:</span> <span class="mf">3.1232</span>
<span class="n">actual</span><span class="o">:</span> <span class="mf">3.141592653589793</span>
<span class="n">difference</span> <span class="k">is</span> <span class="mf">0.018392653589792918</span>
</code></pre></div>


</div>

</div>

<h2 id="now-to-jazz-this-up-visually">now to jazz this up visually</h2>
<p>Putting our random darts in a dataframe to make it easier to eyeball:
<div class="codecell" markdown="1">
<div class="input_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">darths_thrown</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>


<p></div>
<div class="output_area" markdown="1"></p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.849016</td>
      <td>0.329357</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.522901</td>
      <td>1.703207</td>
    </tr>
  </tbody>
</table>
</div>

</div>

</div>

<p>Now to label each darth thrown if its inside or outside the circle:
<div class="codecell" markdown="1">
<div class="input_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">is_in_circle</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;In_Circle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">is_in_circle</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div>


<p></div>
<div class="output_area" markdown="1"></p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>In_Circle</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.849016</td>
      <td>0.329357</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.522901</td>
      <td>1.703207</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.694082</td>
      <td>1.474200</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.820643</td>
      <td>1.966332</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>

</div>

</div>

<p>Now to eyeball the random darts, coloured by whether they are in or outside the circle:
<div class="codecell" markdown="1">
<div class="input_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Random darts!&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="n">within</span> <span class="ow">and</span> <span class="s1">&#39;blue&#39;</span> <span class="ow">or</span> <span class="s1">&#39;red&#39;</span> <span class="k">for</span> <span class="n">within</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;In_Circle&#39;</span><span class="p">]],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span><span class="n">s</span><span class="o">=</span> <span class="mi">25</span><span class="p">);</span>
</code></pre></div>


<p></div>
<div class="output_area" markdown="1"></p>
<p><img alt="svg" src="monte_carlo_pi_files/output_8_0.svg" /></p>
</div>

</div>

<p>the ratio of the area of the circle divided by the area of the square gives us pi/4:
<div class="codecell" markdown="1">
<div class="input_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="n">pi_estimate</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;In_Circle&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span>
<span class="n">pi_estimate</span>
</code></pre></div>


<p></div>
<div class="output_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="err">3.148</span>
</code></pre></div>


</div>

<p></div>
<div class="codecell" markdown="1">
<div class="input_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="n">pi_estimate</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
</code></pre></div>


<p></div>
<div class="output_area" markdown="1"></p>
<div class="codehilite"><pre><span></span><code><span class="err">0.0064073464102070155</span>
</code></pre></div>


</div>

</div>

<p>So the estimate is pretty close! Neat, since all it took was some very simple maths and a random number generator.</p>
</article>

<div class="meta">
    posted <time>2018-08-10</time>, updated <time>2020-08-28</time><br>
    tagged: 
    <a href="/algorithims">algorithims</a>
</div>

<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>