<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/tailwind.css" rel="stylesheet">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/a11y-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>

        <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

        <title>Finding Pi using Monte Carlo</title>
    </head>

    <body class="bg-yellow-100">

        <header class="bg-yellow-400 p-4 sm:p-6 md:p-8 lg:p-10 xl:p-12">
            <a href="/" 
            class="text-3xl font-mono tracking-wider font-extrabold"
            >khalido.org</a>
            <br>
            <p>every blog needs subheader text</p>
        </header>

        <!--container setting paddings-->
        <div
    class="max-w-3xl
      mx-auto
      px-4 py-5
      sm:px-6 
      md:px-7 
      lg:max-w-4xl lg:px-8
      xl:max-w-5xl xl:px-9
      bg-gray-50"
      >
 
        


<article class="prose md:prose-lg lg:prose-xl">
    <h1 id=None>Finding Pi using Monte Carlo</h1>

    <details close class="fixed top-0 right-0 text-sm text-gray-500">
        <summary>Table of contents.</summary>
        <div class="toc">
<ul>
<li><a href="#simple-way">simple way</a></li>
<li><a href="#now-to-jazz-this-up-visually">now to jazz this up visually</a></li>
</ul>
</div>

    </details>
    
    <p>pi can be approximated by throwing darts at a circle in a square, and calculating the ratio of darts landing on the circle vs the square.</p>
<pre><code class="language-python">#hide
import math
import random
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
</code></pre>
<h2 id="simple-way">simple way</h2>
<p>First, we generate a bunch of throws by using random.random()</p>
<p>We are throwing darts in only the top right quadrant of the square, so the origin is the center of the square, and the diameter of the circle is 2.</p>
<p>We figure out if the points are in the circle by using the pythogeras theorem to calculate the distance of each point from the origin <code>(0,0)</code>. If the distance is greater than the radius of the circle, it's outside.</p>
<pre><code class="language-python">darths_thrown = 10000
throws = [[random.random(), random.random()] for i in range(darths_thrown)]

in_circle=0
out_circle=0

for throw in throws:
    if math.sqrt(throw[0]**2 + throw[1]**2) &lt;= 1:
        in_circle +=1
    else:
        out_circle += 1

pi_estimate = in_circle/len(throws) * 4

print(f'estimate: {pi_estimate}')
print(f'actual: {math.pi}')
print(f'difference is {abs(pi_estimate-math.pi)}')
</code></pre>
<pre><code>estimate: 3.1232
actual: 3.141592653589793
difference is 0.018392653589792918
</code></pre>
<h2 id="now-to-jazz-this-up-visually">now to jazz this up visually</h2>
<p>Putting our random darts in a dataframe to make it easier to eyeball:</p>
<pre><code class="language-python">df = pd.DataFrame(np.random.rand(darths_thrown,2)*2, columns=[&quot;x&quot;, &quot;y&quot;])
df.head(2)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.849016</td>
      <td>0.329357</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.522901</td>
      <td>1.703207</td>
    </tr>
  </tbody>
</table>
</div>

<p>Now to label each darth thrown if its inside or outside the circle:</p>
<pre><code class="language-python">def is_in_circle(row):
    x = row['x']
    y = row['y']
    if math.sqrt((x-1)**2 + (y-1)**2) &lt;= 1:
        return True
    else:
        return False

df['In_Circle'] = df.apply(is_in_circle, axis=1)
df.head(4)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>In_Circle</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.849016</td>
      <td>0.329357</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.522901</td>
      <td>1.703207</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.694082</td>
      <td>1.474200</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.820643</td>
      <td>1.966332</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>

<p>Now to eyeball the random darts, coloured by whether they are in or outside the circle:</p>
<pre><code class="language-python">fig, ax = plt.subplots(figsize=(9,9))
ax.set_title(&quot;Random darts!&quot;)
ax.scatter(df['x'], df['y'], c=[within and 'blue' or 'red' for within in df['In_Circle']], alpha=0.4,s= 25);
</code></pre>
<p><img alt="svg" src="monte_carlo_pi_files/monte_carlo_pi_10_0.svg" /></p>
<p>the ratio of the area of the circle divided by the area of the square gives us pi/4:</p>
<pre><code class="language-python">pi_estimate = df['In_Circle'].sum() / len(df) * 4
pi_estimate
</code></pre>
<pre><code>3.148
</code></pre>
<pre><code class="language-python">pi_estimate - math.pi
</code></pre>
<pre><code>0.0064073464102070155
</code></pre>
<p>So the estimate is pretty close! Neat, since all it took was some very simple maths and a random number generator.</p>

    <!-- post meta info div-->
    <div class="text-gray-600 text-base">
        posted <time>2018-08-10</time>, updated <time>2021-09-02</time><br>
        tagged: 
        <a href="/algorithims"
        class="text-pink-500 bg-transparent hover:bg-pink-500 hover:text-white active:bg-pink-600 font-bold rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150">
        algorithims</a>

        View on: 
            <a href="https://github.com/khalido/blog/blob/master/notebooks/monte_carlo_pi.ipynb">github</a>, 
            <a href="https://colab.research.google.com/github/khalido/blog/blob/master/notebooks/monte_carlo_pi.ipynb">
                colab2
            </a>,
            <a href="https://deepnote.com/viewer/github/khalido/blog/blob/master/notebooks/monte_carlo_pi.ipynb">deepnote</a>

        
    
    </div>
</article>

<script>hljs.highlightAll();</script>
</div> <!-- closes first div after body -->

<hr>
<footer class="px-4 py-8 content-center text-center">
    <p class="text-sm text-gray-300 pb-2">
        <a href="https://github.com/khalido/blog">#</a>
        <a href="https://twitter.com/KO">@ko</a>
    </p>
</footer>

</body>

</html>