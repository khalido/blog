<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">
        
        

        <title>Jupyter Lab tips and tricks</title>
    </head>

    <body>
 
        <header>
            <a href="/">khalido.org</a> <br>
            I love me some subheader text.
        </header>


<article>
        <h1>Jupyter Lab tips and tricks</h1>
  
    <p>My collection of tips and tricks for using jupyter lab.</p>
<p><a href="https://jupyterlab.readthedocs.io/en/stable/">Jupyterlab</a> is already installed with <a href="https://www.anaconda.com/distribution/">Anaconda</a>, but if using miniconda install it by:</p>
<p><code>conda install -c conda-forge jupyterlab ipywidgets</code></p>
<h2 id="magic-commands">magic commands</h2>
<p>list all magic commands: <code>%lsmagic</code></p>
<p>My shortlist:</p>
<ul>
<li>Load a file: <code>%load ./hello_world.py</code></li>
<li>time a cell: <code>%%time</code></li>
</ul>
<h2 id="extensions">Extensions</h2>
<ul>
<li><a href="https://github.com/jupyterlab/jupyterlab-toc">Table of Contents</a> - displays a toc in the sidebar.</li>
<li><a href="https://github.com/krassowski/jupyterlab-go-to-definition">Go to Definition</a> - <code>ctrl-alt-b</code> jumps to the point in the notebok the variable or function is defined</li>
</ul>
<p><a href="https://www.npmjs.com/search?q=keywords:jupyterlab-extension">Jupyterlab extensions</a> are built using nodejs, so install that by:</p>
<p>Step 1: install <a href="https://github.com/nvm-sh/nvm#install--update-script">nvm</a>, a script to install nodejs:</p>
<p><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</code></p>
<p>step 2: install nodejs itself by:</p>
<p><code>nvm install node</code></p>
<p>Install all the extensions then build in one go by:</p>
<div class="codehilite"><pre><span></span><code><span class="err">jupyter labextension install @jupyter-widgets/jupyterlab-manager --no-build &amp;&amp; \</span>
<span class="err">jupyter labextension install @jupyterlab/toc --no-build &amp;&amp; \</span>
<span class="err">jupyter lab build --minimize=False</span>
</code></pre></div>


<p>Note: the build flag is because building was taking too long without this.</p>
<h2 id="blog-with-jupyter-notebooks">blog with jupyter notebooks</h2>
<p>So there are tools like Pelican which are setup directly with jupyter notebooks, but I had already set up a hugo powered blog since its free, easy and just works, so my mini shortcut is to put all my notebooks the hugo content directory and run a little script there which converts the jupyter notebooks to markdown files:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># path to jupyter notebooks </span>
<span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;content/&#39;</span>

<span class="c1"># Find all jupyter notebooks in the content folder (and its subfolders)</span>
<span class="n">all_ipynb_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                   <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span>
                           <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;.ipynb&quot;</span><span class="p">))]</span>

<span class="c1"># Remove all notebooks from checkpoint folders</span>
<span class="n">ipynb_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_ipynb_files</span> <span class="k">if</span> <span class="s2">&quot;.ipynb_checkpoints&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

<span class="c1"># converting to markdown, one at a time</span>
<span class="k">for</span> <span class="n">notebook</span> <span class="ow">in</span> <span class="n">ipynb_files</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;jupyter nbconvert --to markdown </span><span class="si">{</span><span class="n">notebook</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Converted </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">ipynb_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> jupter notebooks to markdown.&quot;</span><span class="p">)</span>
</code></pre></div>


<p>The above works just fine, but i had a problem: the web server wasn't displaying images from the jupyter notebook posts.</p>
<p>One solution is to go through every markdown file and fix the link so it points to the right file, but the easiest solution Google found me was this:</p>
<p>In the nbconvert config file <code>~/.jupyter/jupyter_nbconvert_config.py</code> put the following line:</p>
<p><code>c.NbConvertApp.output_files_dir = '{notebook_name}'</code></p>
<p>This saves the output file in a folder which is the same as the notebook name - I've found that way then the netlify webserver just serves up the image files without having to rewrite the image path inside the markdown file.</p>
<p><em>Note: this post is a work in progress...</em></p>
</article>

<div class="meta">
    posted <time>2019-08-04</time>, updated <time>2020-08-11</time><br>
    tagged: 
    <a href="/jupyter">jupyter</a>
</div>

<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>