<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">
        
        

        <title>"This is a blog"</title>
    </head>

    <body>
 
        <header>
            <a href="/">khalido.org</a> <br>
            I love me some subheader text.
            <hr>
        </header>

    <p>All the blog posts, using fusejs to search post title, content and tags.</p>

    <p>all the posts should display if js is disabled, and the search box works if js is on.</p>

    <input type="text" id="postSearch" placeholder="Search posts...">
    <ul id="searchresults">
            <li><a href="/python/anaconda.html">Using Anaconda</a></li>
            <li><a href="/python/test.html">blogging with jupyter notebooks</a></li>
            <li><a href="/python/building_this_blog.html">how the blog was built</a></li>
            <li><a href="/python/note_in_subfolder.html">Testing note in a subfolder</a></li>
            <li><a href="/python/monty_hall.html">Monty Hall</a></li>
    </ul>    

    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js"></script>

    <script>
        //const searchList2 = require("posts.json");
        const searchList = [{"title": "Using Anaconda", "tags": ["python"], "link": "python/anaconda.html"}, {"title": "blogging with jupyter notebooks", "tags": ["python"], "link": "python/test.html"}, {"title": "how the blog was built", "tags": ["python"], "link": "python/building_this_blog.html"}, {"title": "Testing note in a subfolder", "tags": ["python"], "link": "python/note_in_subfolder.html"}, {"title": "Monty Hall", "tags": ["python"], "link": "python/monty_hall.html"}]
        const options = {
            includeScore: false,
            threshold: 0.3,
            // Search in `title` and in `tags` array, add posts as well
            // default weight is 1
            keys: [{ name: 'title', weight: 2 },
                'tags']
        }

        const fuse = new Fuse(searchList, options)
        const input = document.getElementById("postSearch")

        input.oninput = (event) => {
            const results = fuse.search(event.target.value)

            document.getElementById("searchresults").innerHTML = "";

            for (result of results) {
                //console.log(result.item.title, result.item.tags)
                document.getElementById('searchresults').innerHTML += '<li>' + '<a href ="' + result.item.link + '">' + result.item.title + '</a></li>'
            }

            // if no input show all the posts
            if (input.value == "") {
                for (result of searchList) {
                    //console.log(result.item.title, result.item.tags)
                    document.getElementById('searchresults').innerHTML += '<li>' + '<a href ="' + result.link + '">' + result.title + '</a></li>'
                }
            }

        }

    </script>
    
    <h3>Simple list of posts</h3>
    <p>All the Blog posts using mako templates. The filter here is a simple javascript one just filtering on the content inside the list.</p>

    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Filter.." title="Type">

    <ul id="myUL">
            <li><a href="anaconda.html">Using Anaconda</a></li>
            <li><a href="test.html">blogging with jupyter notebooks</a></li>
            <li><a href="building_this_blog.html">how the blog was built</a></li>
            <li><a href="note_in_subfolder.html">Testing note in a subfolder</a></li>
            <li><a href="monty_hall.html">Monty Hall</a></li>
    </ul>



<script>
    function myFunction() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL");
        li = ul.getElementsByTagName("li");
        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByTagName("a")[0];
            txtValue = a.textContent || a.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
            } else {
                li[i].style.display = "none";
            }
        }
    }
</script>


<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>