<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.3/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">

        <link rel="stylesheet" type="text/css" href="/ko.css">
        
        

        <script src="https://unpkg.com/htmx.org"></script>

        <title>Advent of Code 2015</title>
    </head>

    <body>
 
        <header>
            <a href="/">"khalido.org"</a> <br>
            "some subheader text."
        </header>

    <details open class="toc">
        <summary>Table of contents.</summary>
        <div class="toc">
<ul>
<li><a href="#day-1-not-quite-lisp">Day 1: Not Quite Lisp</a></li>
<li><a href="#day-2-i-was-told-there-would-be-no-math">Day 2: I Was Told There Would Be No Math</a></li>
<li><a href="#day-3-perfectly-spherical-houses-in-a-vacuum">Day 3: Perfectly Spherical Houses in a Vacuum</a></li>
<li><a href="#day-4-the-ideal-stocking-stuffer">Day 4: The Ideal Stocking Stuffer</a></li>
<li><a href="#day-5-doesnt-he-have-intern-elves-for-this">Day 5: Doesn't He Have Intern-Elves For This?</a></li>
<li><a href="#day-6-probably-a-fire-hazard">Day 6: Probably a Fire Hazard</a></li>
</ul>
</div>

    </details>

<article>
    
    <p>Quarantime time is the perfect time to setup a jupyter notebook powered blog and solve <a href="http://adventofcode.com/">Advent of Code</a>, starting with 2015. The following is a write up of how to solve and things I learved while doing so, thus some of the code is spelled out and slow! So look at the <a href="https://www.reddit.com/r/adventofcode/">AOC reddit site</a> for ninja level solutions.</p>
<p>I am trying to</p>
<ul>
<li>code in a readable fashion, avoiding shortcuts (easier said then done!)</li>
<li>make visuals as many problems as possible.</li>
<li>not <a href="https://docs.google.com/presentation/d/1n2RlMdmv1p25Xy5thJUhkKGvjtV-dkAIsUXP-AL4ffI/edit?usp=sharing">mangle up jupyter notebooks too badly</a>. Real code is written using a text editor! Unless you are <a href="https://netflixtechblog.com/notebook-innovation-591ee3221233">Netflix</a>, or course, or using <a href="https://yihui.org/en/2018/09/xfun-pkg-attach/">rmarkdown</a>.</li>
</ul>
<p>First up, I'm importing all the libs I'll use up here:</p>
<pre><code class="language-python">#collapse-hide
# python essentials
import os
import re
import hashlib
import math
from pathlib import Path
from typing import List
from collections import defaultdict, namedtuple, Counter

# useful external libs
#import numpy as np
import pandas as pd

# misc utils
import requests
#from tqdm.notebook import trange, tqdm # progress bars for slow funcs
#from functools import reduce 

# for plots, cause visuals
import matplotlib.pyplot as plt # goto python viz lib
import seaborn as sns # prettify matplotlib
from IPython.display import display, Markdown

# javascript plotting for interactive graphs
#import altair as alt
#import plotly.express as px
</code></pre>
<p>Some helper functions to avoid rewriting the same code for all the problems:</p>
<pre><code class="language-python">#collapse-hide
input_path = Path.home() / &quot;code&quot; / &quot;adventofcode&quot; / &quot;inputs&quot;
github_url = url = &quot;https://github.com/khalido/adventofcode/raw/master/inputs&quot;

def get_input(day:int=1, year:int=2015) -&gt; str:
    &quot;&quot;&quot;takes in the day, year and date, returns the input&quot;&quot;&quot;

    try:    # load from local disk
        with open(input_path / f&quot;{year}&quot; / f&quot;{day}.txt&quot;) as f:
            data = f.read()
    except: # else load from github repo
        print(f&quot;Failed to load {year}/{day}.txt from disk, trying to get from github&quot;)
        url = f&quot;{github_url}/{year}/{day}.txt&quot;
        r = requests.get(url)
        if r.status_code == 200:
            data = r.text
        else:
            print(f&quot;Failed to load {year}.{day}&quot;)
            data = None

    return data.strip()

def printmd(txt=&quot;## testing&quot;):
    display(Markdown(txt))
</code></pre>
<h2 id="day-1-not-quite-lisp">Day 1: Not Quite Lisp</h2>
<p><a href="https://adventofcode.com/2015/day/1">#</a> We're standing at a inifinite building, and following instructions:<code>(</code> is up, <code>)</code> is down to find the right floor.</p>
<p>This is simple - minus the ups from the downs:</p>
<pre><code class="language-python">inp1 = get_input(1)
inp1.count(&quot;(&quot;) - inp1.count(&quot;)&quot;)
</code></pre>
<pre><code>138
</code></pre>
<p>A list comprehension version for kicks:</p>
<pre><code class="language-python">sum([1 if char == &quot;(&quot; else -1 for char in inp1])
</code></pre>
<pre><code>138
</code></pre>
<p>for part 2, we need to find the first time he enters the basement while following the instructions.</p>
<pre><code class="language-python">floor = 0
floors = []

for i, mv in enumerate(inp1):
    if mv == &quot;(&quot;:
        floor += 1
    else:
        floor -= 1

    floors.append(floor)

    if floor == -1:
        printmd(f&quot;Timesteps to reach the basement: **{i + 1}**&quot;)
        break # no need to continue climbing

plt.title(&quot;Floor Tracker&quot;); plt.xlabel(&quot;Timestep&quot;); plt.ylabel(&quot;Floor&quot;)
plt.axhline(y=-1, label=&quot;Basement&quot;, color=&quot;red&quot;)
plt.axhline(y=138, label=&quot;Final Floor&quot;, color=&quot;orange&quot;)
plt.plot(range(len(floors)), floors, label=&quot;Position&quot;)
plt.legend(loc=&quot;upper right&quot;);
</code></pre>
<p>Timesteps to reach the basement: <strong>1771</strong></p>
<p><img alt="png" src="Advent-of-Code-2015_files/Advent-of-Code-2015_10_1.png" /></p>
<h2 id="day-2-i-was-told-there-would-be-no-math">Day 2: I Was Told There Would Be No Math</h2>
<p>How much wrapping paper is needed to wrap a bunch of presents?
We need<code>2*l*w + 2*w*h + 2*h*l</code> paper, and the input is the l, w and h of each present.</p>
<p>In the bad old days of programming, this would be the perfect place to represent the data as a list or tuple in the form <code>[3 ,3, 9]</code> representing <code>[l, w, h]</code>. But now we can use namedtuples to make it easier to understand the data:</p>
<pre><code class="language-python">Present = namedtuple(&quot;Present&quot;, [&quot;l&quot;, &quot;w&quot;, &quot;h&quot;])

inp2 = get_input(2).split(&quot;\n&quot;)
data2 = [Present(*[int(x) for x in i.split(&quot;x&quot;)]) for i in inp2]
data2[:4]
</code></pre>
<pre><code>[Present(l=29, w=13, h=26),
 Present(l=11, w=11, h=14),
 Present(l=27, w=2, h=5),
 Present(l=6, w=10, h=13)]
</code></pre>
<pre><code class="language-python">def get_present_area(p: Present) -&gt; int:
    box_area = sum([2*p.l*p.w, 2*p.w*p.h, 2*p.h*p.l])
    extra_paper = math.prod(sorted(p)[:2])
    return box_area + extra_paper

sum([get_present_area(x) for x in data2])
</code></pre>
<pre><code>1586300
</code></pre>
<p>Now we need to calcuate the ribbon required, which is equal to the perimeter of the smallest face + cubic volume of the present</p>
<pre><code class="language-python">def ribbon(present: Present) -&gt; int:
    &quot;&quot;&quot;takes in present, returns length of ribbon needed to wrap&quot;&quot;&quot;
    l, w, h = sorted(present)
    return 2*l + 2*w + l*w*h

sum([ribbon(present) for present in data2])
</code></pre>
<pre><code>3737498
</code></pre>
<h2 id="day-3-perfectly-spherical-houses-in-a-vacuum">Day 3: Perfectly Spherical Houses in a Vacuum</h2>
<p><a href="https://adventofcode.com/2015/day/3">#</a> Santa is delivering presents to houses, and his movements is 1 step at a time: north (^), south (v), east (&gt;), or west (&lt;)</p>
<pre><code class="language-python">inp3 = get_input(3)

dirs = {&quot;^&quot;: (0,1), &quot;&gt;&quot;: (1,0), &quot;v&quot;: (0,-1), &quot;&lt;&quot;: (-1, 0)}

def get_moves(data):
    moves = [(0,0)]  # starting point

    for mv in data:
        x, y = moves[-1] # x,y of current pos
        xx, yy = dirs[mv]
        moves.append((x + xx, y + yy))
    return moves

moves = get_moves(inp3)
c = Counter(moves)
printmd(f&quot;Santa visited **{len(c)}** unique places.&quot;)

x, y = zip(*moves)

f, ax = plt.subplots(figsize=(10,6))
plt.title(f&quot;Santa visited {len(c)} unique places in {len(moves)} visits&quot;)
ax.plot(x,y, alpha=0.7, label=&quot;Santa's Movements&quot;); ax.legend();
</code></pre>
<p>Santa visited <strong>2565</strong> unique places.</p>
<p><img alt="png" src="Advent-of-Code-2015_files/Advent-of-Code-2015_17_1.png" /></p>
<p>for part 2, we have two santas! They move alternatingly, so we can say Santa_1 does all the odd moves and Santa_2 does all the even moves:</p>
<pre><code class="language-python">santa_1 = get_moves(inp3[::2])  # all the odd moves
santa_2 = get_moves(inp3[1::2]) # all the even moves

two_santas = Counter(santa_1 + santa_2)
printmd(f&quot;The two santas visited **{len(two_santas)}** unique places.&quot;)

f, ax = plt.subplots(figsize=(10,6))
plt.title(f&quot;the two santas visited {len(two_santas)} unique places&quot;)

for name, santa in zip((&quot;Bob&quot;, &quot;Alice&quot;), (santa_1, santa_2)):
    x, y = zip(*santa)
    ax.plot(x,y, alpha=0.8, label=f&quot;Santa_{name}&quot;)
ax.legend();
</code></pre>
<p>The two santas visited <strong>2639</strong> unique places.</p>
<p><img alt="png" src="Advent-of-Code-2015_files/Advent-of-Code-2015_19_1.png" /></p>
<h2 id="day-4-the-ideal-stocking-stuffer">Day 4: The Ideal Stocking Stuffer</h2>
<p><a href="https://adventofcode.com/2015/day/4">#</a></p>
<pre><code class="language-python">inp4 = &quot;bgvyzdsv&quot;
test4_1 = &quot;abcdef&quot; #609043
test4_2 = &quot;pqrstuv&quot; # 1048970

def make_hash(txt):
    return hashlib.md5(txt.encode(&quot;utf&quot;)).hexdigest()


</code></pre>
<pre><code>False
</code></pre>
<pre><code class="language-python">def day_4_1(inp=inp4, s=&quot;None&quot;, target=&quot;00000&quot;, i=0) -&gt; int:
    while not s.startswith(target):
        i += 1
        txt = inp + str(i)
        s = make_hash(txt)
    printmd(f&quot;_{inp}_ target at position **{i:,}** ({s})&quot;)
    return i

assert day_4_1(&quot;abcdef&quot;) == 609043    # tests are always a good idea
assert day_4_1(&quot;pqrstuv&quot;) == 1048970    

day_4_1()
</code></pre>
<p><em>abcdef</em> target at position <strong>609,043</strong> (000001dbbfa3a5c83a2d506429c7b00e)</p>
<p><em>pqrstuv</em> target at position <strong>1,048,970</strong> (000006136ef2ff3b291c85725f17325c)</p>
<p><em>bgvyzdsv</em> target at position <strong>254,575</strong> (000004b30d481662b9cb0c105f6549b2)</p>
<pre><code>254575
</code></pre>
<p>Part two just changes the target sring to have one more zero so thanks to making part one a function this is easy:</p>
<pre><code class="language-python">day_4_1(target=&quot;000000&quot;)
</code></pre>
<p><em>bgvyzdsv</em> target at position <strong>1,038,736</strong> (000000b1b64bf5eb55aad89986126953)</p>
<pre><code>1038736
</code></pre>
<h2 id="day-5-doesnt-he-have-intern-elves-for-this">Day 5: Doesn't He Have Intern-Elves For This?</h2>
<p><a href="https://adventofcode.com/2015/day/5">#</a> We have a list of strings, and Santa has the following rules to figure out which ones are nice:</p>
<ul>
<li>at least three vowels (aeiou only), like aei, xazegov, or aeiouaeiouaeiou.</li>
<li>at least one letter that appears twice in a row, like xx, abcdde (dd), or aabbccdd (aa, bb, cc, or dd).</li>
<li>does not contain the strings ab, cd, pq, or xy, even if they are part of one of the other requirements.</li>
</ul>
<pre><code class="language-python">vowels = &quot;aeiou&quot;                        # need vowels
bad_strings = [&quot;ab&quot;, &quot;cd&quot;, &quot;pq&quot;, &quot;xy&quot;]  # don't want these
regex = re.compile(r&quot;([a-zA-Z])\1{1,}&quot;) # search for 2+ letters in a row

test4 = [&quot;ugknbfddgicrmopn&quot;, &quot;aaa&quot;, &quot;jchzalrnumimnmhp&quot;, 
        &quot;haegwjzuvuyypxyu&quot;, &quot;dvszwmarrgswjxmb&quot;]

def is_nice_string(txt):
    vowel_count = len([char for char in txt if char in vowels]) &gt;= 3
    two_chars = len(re.findall(regex, txt)) &gt; 0
    no_bad_str = True if (sum([s3d in txt for s in bad_strings]) == 0) else False

    return vowel_count and two_chars and no_bad_str

[is_nice_string(t) for t in test4] #== [False, False, True, True, True]
</code></pre>
<pre><code>[True, True, False, False, False]
</code></pre>
<pre><code class="language-python">inp5 = get_input(5).split(&quot;\n&quot;)
print(&quot;Number of nice strings: &quot;, sum([is_nice_string(t) for t in inp5]))
</code></pre>
<pre><code>Number of nice strings:  258
</code></pre>
<p>for <strong>part two</strong>, the rules have changed, a nice string has these properties:</p>
<ul>
<li>It contains a pair of any two letters that appears at least twice in the string without overlapping, like xyxy (xy) or aabcdefgaa (aa), but not like aaa (aa, but it overlaps).</li>
<li>It contains at least one letter which repeats with exactly one letter between them, like xyx, abcdefeghi (efe), or even aaa.</li>
</ul>
<blockquote>
<p>Note: the rest remains to be done</p>
</blockquote>
<pre><code class="language-python">regex_2char = re.compile(r&quot;([a-zA-Z])\1{1,}&quot;)
regex_3char = re.compile(r&quot;([a-zA-Z])\1{2,}&quot;)

for txt in [&quot;aa&quot;, &quot;aba&quot;, &quot;aaa&quot;]:
    print(re.findall(regex_2char, txt))
</code></pre>
<pre><code>['a']
[]
['a']
</code></pre>
<h2 id="day-6-probably-a-fire-hazard">Day 6: Probably a Fire Hazard</h2>
<p><a href="https://adventofcode.com/2015/day/6">#</a></p>

    <div class="meta">
        posted <time>2020-08-10</time>, updated <time>2021-07-23</time><br>
        tagged: 
        <a href="/python">python</a>
        
        <p>
            <a href="https://github.com/khalido/blog/blob/master/notebooks/Advent-of-Code-2015.ipynb">github</a>, 
            <a href="https://colab.research.google.com/github/khalido/blog/blob/master/notebooks/Advent-of-Code-2015.ipynb">
                colab2
            </a>,
            <a href="https://deepnote.com/viewer/github/khalido/blog/blob/master/notebooks/Advent-of-Code-2015.ipynb">deepnote</a>

        
        </p>
    
    </div>
</article>

<script>hljs.initHighlightingOnLoad();</script>


<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>