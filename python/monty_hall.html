<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--temp stylesheet, customize my own one later.
        https://github.com/kognise/water.css-->
        
        
        <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.3/new.min.css">

        <link rel="stylesheet" type="text/css" href="/codestyles.css">
        
        

        <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.0/styles/default.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.0/highlight.min.js"></script>

        <title>Monty Hall</title>
    </head>

    <body>
 
        <header>
            <a href="/">"khalido.org"</a> <br>
            "some subheader text."
        </header>

<article>

    <details open>
        <summary>Table of contents.</summary>
        <div class="toc">
<ul>
<li><a href="#setting-up-a-game">setting up a game</a></li>
<li><a href="#the-no-reveal-month">the no reveal month</a></li>
</ul>
</div>

    </details>
    
    <hr>
    
    <p>The famous <a href="https://en.wikipedia.org/wiki/Monty_Hall_problem">Monty Hall brain teaser</a>:</p>
<blockquote>
<p>Suppose you're on a game show, and you're given the choice of three doors: Behind one door is a car; behind the others, goats. You pick a door, say No. 1, and the host, who knows what's behind the doors, opens another door, say No. 3, which has a goat. He then says to you, "Do you want to pick door No. 2?" Is it to your advantage to switch your choice?</p>
</blockquote>
<p>There is a really <a href="http://marilynvossavant.com/game-show-problem/">fun discussion over at Marilyn vos Savant's site</a>.</p>
<p>Ok, now to setup the problem, along with some kind of visuals and what not.</p>
<pre><code class="language-python">#hide
import random
import numpy as np

# for plots, cause visuals
import matplotlib.pyplot as plt, seaborn as sns
</code></pre>
<h2 id="setting-up-a-game">setting up a game</h2>
<p>There are many ways to do this, but to keep it simple and human comprehensible I'm going to do it one game at a time. </p>
<p>First up, a helper function which takes the door number guessed and the door opened up the host to reveal a goat, and returns the switched door:</p>
<pre><code class="language-python">def switch_door(guess, goat_door_opened):
    &quot;&quot;&quot;takes in the guessed door and the goat door opened
    and returns the switched door number&quot;&quot;&quot;
    doors = [0,1,2]
    doors.remove(goat_door_opened)
    doors.remove(guess)
    return doors[0]
</code></pre>
<p>Now the actual monty hall function - it takes in a guess and whether you want to switch your guess, and returns True or False depending on whether you win</p>
<pre><code class="language-python">def monty_hall(guess=0, switch_guess=False, open_goat_door=True):
    &quot;&quot;&quot;sets up 3 doors 0-2, one which has a pize, and 2 have goats.
    takes in the door number guessed by the player and whether he/she switched door
    after one goat door is revealed&quot;&quot;&quot;

    doors = [door for door in range(3)]
    np.random.shuffle(doors)
    prize_door = doors.pop()

    goat_door_opened = doors[0]

    if goat_door_opened == guess:
        goat_door_opened = doors[1]

    if switch_guess:
        return switch_door(guess, goat_door_opened) == prize_door
    else:
        return guess == prize_door
</code></pre>
<p>Now to run through a bunch of monty hall games:</p>
<pre><code class="language-python">no_switch = np.mean([monty_hall(random.randint(0,2), False) for _ in range(100000)])
no_switch
</code></pre>
<pre><code>0.33196
</code></pre>
<p>Not switching doors wins a third of the time, which makes intuitive sense, since we are choosing one door out of three.</p>
<pre><code class="language-python">yes_switch = np.mean([monty_hall(random.randint(0,2), True) for _ in range(100000)])
yes_switch
</code></pre>
<pre><code>0.66534
</code></pre>
<p>This is the suprising result, since switching our guess increases the win rate to two third! To put it more graphically:</p>
<pre><code class="language-python">#collapse-hide
fig, ax = plt.subplots(figsize=(8,8))
ax.set_title(&quot;Switching&quot;, fontsize=16)
ax.pie([yes_switch, no_switch], labels=[&quot;Switching win %&quot;, &quot;Not switching win %&quot;],
       autopct='%1.1f%%', explode=(0, 0.05));
</code></pre>
<p><img alt="svg" src="monty_hall_files/monty_hall_12_0.svg" /></p>
<p>So our chances of winning essentially double if we switch our guess once a goat door has been opened.</p>
<p>This is a good <a href="https://somethingaweek.wordpress.com/2010/08/19/22-lets-make-a-deal/">monty hall infographic</a>.</p>
<h2 id="the-no-reveal-month">the no reveal month</h2>
<p>So what if Monty never opens a goat door, and just gives us a change to switch the guessed door? Does the winning % still change?</p>
<p>So first we change the switch door function to remove the reveal option:</p>
<pre><code class="language-python">def switch_door_no_revel(guess):
    &quot;&quot;&quot;takes in the guessed door
    and returns the switched door number&quot;&quot;&quot;
    doors = [0,1,2]
    doors.remove(guess)
    np.random.shuffle(doors)
    return doors[0]
</code></pre>
<p>Then I removed the revealing the goat door code from the original monty hall function above:</p>
<pre><code class="language-python">def monty_hall_no_reveal(guess=0, switch_guess=False):
    &quot;&quot;&quot;sets up 3 doors 0-2, one which has a pize, and 2 have goats.
    takes in the door number guessed by the player and whether he/she switched door
    &quot;&quot;&quot;

    doors = [door for door in range(3)]
    np.random.shuffle(doors)
    prize_door = doors.pop()

    if switch_guess:
        return switch_door_no_revel(guess) == prize_door
    else:
        return guess == prize_door
</code></pre>
<p>Now to run some sims:</p>
<pre><code class="language-python">no_switch_no_reveal = np.mean([monty_hall_no_reveal(random.randint(0,2), False) for _ in range(100000)])
yes_switch_no_reveal = np.mean([monty_hall_no_reveal(random.randint(0,2), True) for _ in range(100000)])
</code></pre>
<pre><code class="language-python">plt.bar([0,1], [yes_switch_no_reveal, no_switch_no_reveal], 
tick_label=[&quot;Switched Guess&quot;,&quot;Didn't Switch&quot;], color=[&quot;blue&quot;,&quot;red&quot;], alpha=0.7)
print(&quot;Switching a door if a goat door hasn't been revealed&quot;)
</code></pre>
<pre><code>Switching a door if a goat door hasn't been revealed
</code></pre>
<p><img alt="svg" src="monty_hall_files/monty_hall_20_1.svg" /></p>
<p>There is no impact of switching our guess if a goat door hasn't been revealed. Which makes sense to, since whatever door we choose, it has 1/3 probablity of winning. </p>
<pre><code class="language-python">
</code></pre>

    <div class="meta">
        posted <time>2019-07-05</time>, updated <time>2021-06-07</time><br>
        tagged: 
        <a href="/python">python</a>
        
        <p>
            <a href="https://github.com/khalido/blog/blob/master/notebooks/monty_hall.ipynb">github</a>, 
            <a href="https://colab.research.google.com/github/khalido/blog/blob/master/notebooks/monty_hall.ipynb">
                colab2
            </a>,
            <a href="https://deepnote.com/viewer/github/khalido/blog/blob/master/notebooks/monty_hall.ipynb">deepnote</a>

        
        </p>
    
    </div>
</article>

<script>hljs.initHighlightingOnLoad();</script>


<hr>
<footer>
    This is a footer. One day some footery text will go here. 
</footer>



</body>

</html>